{% comment %}
  sections/pricing.liquid
  Pricing section with styling matching products-overview.liquid
{% endcomment %}

<section class="pricing-section" id="pricing">
  <div class="container">
    <div class="section-header">
      <h2>{{ section.settings.section_title }}</h2>
      <p>{{ section.settings.section_subtitle }}</p>
    </div>

    <div class="pricing-wrapper">
      {% for block in section.blocks %}
        {% if block.type == 'pricing_plan' %}
          <div class="pricing-option {% if block.settings.is_popular %}featured{% endif %} animate-on-scroll fade-in-up" {{ block.shopify_attributes }}>
            {% if block.settings.is_popular %}
              <span class="popular-tag">Most Popular</span>
            {% endif %}
            
            <div class="price-header">
              <h4>{{ block.settings.plan_name }}</h4>
              
              <div class="price">
                <span class="amount">${{ block.settings.price }}</span>
                <span class="period">/{{ block.settings.period }}</span>
              </div>
              
              {% if block.settings.savings_text != blank %}
                <span class="savings">{{ block.settings.savings_text }}</span>
              {% endif %}
            </div>

            <ul class="plan-features">
              {% assign features = block.settings.features | newline_to_br | split: '<br />' %}
              {% for feature in features %}
                {% if feature != blank %}
                  <li>{{ feature }}</li>
                {% endif %}
              {% endfor %}
            </ul>

            {% if block.settings.button_link != blank %}
              <a href="{{ block.settings.button_link }}" class="btn btn-primary">
                {{ block.settings.button_text }}
              </a>
            {% else %}
              <a href="#" class="btn btn-primary" onclick="alert('Please configure product link'); return false;">
                {{ block.settings.button_text }}
              </a>
            {% endif %}
          </div>
        {% endif %}

        {% if block.type == 'setup_fee_addon' %}
          <div class="pricing-option addon animate-on-scroll fade-in-up" {{ block.shopify_attributes }}>
            <span class="popular-tag">Optional Add-on</span>
            
            <div class="price-header">
              <h4>{{ block.settings.addon_name }}</h4>
              
              <div class="price">
                <span class="amount">${{ block.settings.addon_price }}</span>
                <span class="period">one-time</span>
              </div>
            </div>

            <ul class="plan-features">
              {% assign features = block.settings.addon_features | newline_to_br | split: '<br />' %}
              {% for feature in features %}
                {% if feature != blank %}
                  <li>{{ feature }}</li>
                {% endif %}
              {% endfor %}
            </ul>

            {% if block.settings.addon_button_link != blank %}
              <a href="{{ block.settings.addon_button_link }}" class="btn btn-secondary">
                {{ block.settings.addon_button_text }}
              </a>
            {% else %}
              <a href="#" class="btn btn-secondary" onclick="alert('Please configure product link'); return false;">
                {{ block.settings.addon_button_text }}
              </a>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>



{% schema %}
{
  "name": "Pricing Section",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Bot Suite"
    },
    {
      "type": "text",
      "id": "section_subtitle",
      "label": "Section Subtitle",
      "default": "Choose the plan that works for you"
    }
  ],
  "blocks": [
    {
      "type": "pricing_plan",
      "name": "Pricing Plan",
      "settings": [
        {
          "type": "text",
          "id": "plan_name",
          "label": "Plan Name",
          "default": "Monthly"
        },
        {
          "type": "text",
          "id": "price",
          "label": "Price (numbers only)",
          "default": "49"
        },
        {
          "type": "text",
          "id": "period",
          "label": "Period",
          "default": "mo",
          "info": "e.g., mo, yr"
        },
        {
          "type": "text",
          "id": "savings_text",
          "label": "Savings Text (optional)",
          "info": "e.g., Save $98/year"
        },
        {
          "type": "checkbox",
          "id": "is_popular",
          "label": "Mark as Most Popular",
          "default": false
        },
        {
          "type": "textarea",
          "id": "features",
          "label": "Features (one per line)",
          "default": "✓ Proven Trading Strategies\n✓ Sharp Shooter Candles 4.2\n✓ Sharp Shooter RSI 2.0\n✓ Optional Bot Automation\n✓ Private Discord Community\n✓ Priority Support"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Product Page Link",
          "info": "e.g., /products/bot-suite-monthly"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Get Started"
        }
      ]
    },
    {
      "type": "setup_fee_addon",
      "name": "Setup Fee Add-on",
      "settings": [
        {
          "type": "text",
          "id": "addon_name",
          "label": "Add-on Name",
          "default": "Setup"
        },
        {
          "type": "text",
          "id": "addon_price",
          "label": "Add-on Price (numbers only)",
          "default": "249"
        },
        {
          "type": "textarea",
          "id": "addon_features",
          "label": "Add-on Features (one per line)",
          "default": "✓ Complete Bot Installation\n✓ TradingView Integration\n✓ Strategy Configuration\n✓ Alert Setup & Testing\n✓ 1-on-1 Setup Support"
        },
        {
          "type": "url",
          "id": "addon_button_link",
          "label": "Add-on Product Page Link",
          "info": "e.g., /products/setup-service"
        },
        {
          "type": "text",
          "id": "addon_button_text",
          "label": "Button Text",
          "default": "Add Setup Service"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Pricing",
      "blocks": [
        {
          "type": "pricing_plan",
          "settings": {
            "plan_name": "Monthly",
            "price": "49",
            "period": "mo"
          }
        },
        {
          "type": "pricing_plan",
          "settings": {
            "plan_name": "Annual",
            "price": "490",
            "period": "yr",
            "savings_text": "Save $98/year",
            "is_popular": true
          }
        },
        {
          "type": "setup_fee_addon"
        }
      ]
    }
  ]
}
{% endschema %}